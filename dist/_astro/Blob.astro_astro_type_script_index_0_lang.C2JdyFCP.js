import{L as q,g as p}from"./lifecycle-manager.hFxhgYI4.js";let d,w,h,f;class P{points;ctx=null;_color=null;_canvas=null;_points=0;_radius=0;_position={x:.5,y:.5};_running=!0;constructor(){this.points=[]}init(){for(let t=0;t<this.numPoints;t++){let e=new b(this.divisional*(t+1),this);this.push(e)}}render(){if(!this.canvas||!this.ctx||!f)return;let t=this.canvas,e=this.ctx;this.position;let n=this.points;this.radius;let o=this.numPoints;this.divisional;let a=this.center;e.clearRect(0,0,t.width,t.height),e.drawImage(f,0,0,t.width,t.height),n[0].solveWith(n[o-1],n[1]);let u=n[o-1].position,s=n[0].position,r=s;e.beginPath(),e.moveTo(a.x,a.y),e.moveTo((u.x+s.x)/2,(u.y+s.y)/2);for(let l=1;l<o;l++){n[l].solveWith(n[l-1],n[l+1]||n[0]);let x=n[l].position,L=(s.x+x.x)/2,M=(s.y+x.y)/2;e.quadraticCurveTo(s.x,s.y,L,M),s=x}let y=(s.x+r.x)/2,c=(s.y+r.y)/2;e.quadraticCurveTo(s.x,s.y,y,c),e.fillStyle="#000000",e.globalCompositeOperation="destination-in",e.fill(),e.strokeStyle="#000000",e.globalCompositeOperation="source-over",requestAnimationFrame(this.render.bind(this))}push(t){t instanceof b&&this.points.push(t)}set color(t){this._color=t}get color(){return this._color||"#000000"}set canvas(t){t instanceof HTMLCanvasElement&&(this._canvas=t,this.ctx=this._canvas.getContext("2d"))}get canvas(){return this._canvas}set numPoints(t){t>2&&(this._points=t)}get numPoints(){return this._points||32}set radius(t){t>0&&(this._radius=t)}get radius(){return this._radius||Math.min(this.canvas?.width||0,this.canvas?.height||0)/2.1}set position(t){typeof t=="object"&&t.x!==void 0&&t.y!==void 0&&(this._position=t)}get position(){return this._position}get divisional(){return Math.PI*2/this.numPoints}get center(){return{x:(this.canvas?.width||0)*this.position.x,y:(this.canvas?.height||0)*this.position.y}}set running(t){this._running=t===!0}get running(){return this._running}}class b{parent;azimuth;_components;_acceleration=0;_speed=0;_radialEffect=0;_elasticity=.001;_friction=.0085;constructor(t,e){this.parent=e,this.azimuth=Math.PI-t,this._components={x:Math.cos(this.azimuth),y:Math.sin(this.azimuth)},this.acceleration=-.08+Math.random()*.05}solveWith(t,e){this.acceleration=(-.3*this.radialEffect+(t.radialEffect-this.radialEffect)+(e.radialEffect-this.radialEffect))*this.elasticity-this.speed*this.friction}set acceleration(t){typeof t=="number"&&(this._acceleration=t,this.speed+=this._acceleration*2)}get acceleration(){return this._acceleration||0}set speed(t){typeof t=="number"&&(this._speed=t,this.radialEffect+=this._speed*5)}get speed(){return this._speed||0}set radialEffect(t){typeof t=="number"&&(this._radialEffect=t)}get radialEffect(){return this._radialEffect||0}get position(){return{x:this.parent.center.x+this.components.x*(this.parent.radius+this.radialEffect),y:this.parent.center.y+this.components.y*(this.parent.radius+this.radialEffect)}}get components(){return this._components}set elasticity(t){typeof t=="number"&&(this._elasticity=t)}get elasticity(){return this._elasticity||.001}set friction(t){typeof t=="number"&&(this._friction=t)}get friction(){return this._friction||.0085}}h=new P;let _=!1,g={x:0,y:0},m=!1;function z(i){i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()}let E=function(i){let t=h.center,e=d.getBoundingClientRect(),n=i.clientX-e.left,o=i.clientY-e.top,a={x:n-t.x,y:o-t.y},u=Math.sqrt(a.x*a.x+a.y*a.y),s=null;if(h.mousePos={x:t.x-n,y:t.y-o},u<h.radius&&m===!1){let r={x:n-t.x,y:o-t.y};s=Math.atan2(r.y,r.x),m=!0}else if(u>h.radius&&m===!0){let r={x:n-t.x,y:o-t.y};s=Math.atan2(r.y,r.x),m=!1,h.color=null}if(typeof s=="number"){let r=null,y=100;if(h.points.forEach(c=>{Math.abs(s-c.azimuth)<y&&(r=c,y=Math.abs(s-c.azimuth))}),r){let c={x:g.x-n,y:g.y-o},l=Math.sqrt(c.x*c.x+c.y*c.y)*10;l>15&&(l=15),r.acceleration=l/100*(m?-1:1)}}g.x=n,g.y=o},v=function(){if(d=document.getElementById("blob"),!d)return;let i=550;window.innerWidth<640?i=400:window.innerWidth<400&&(i=300),d.width=i,d.height=i};w=function(){d=document.getElementById("blob"),f=document.getElementById("video-blob"),document.getElementById("blob-cursor-follower"),!(!d||!f)&&(d.setAttribute("touch-action","none"),window.removeEventListener("resize",v),window.addEventListener("resize",v),v(),_||(window.removeEventListener("pointermove",E),window.addEventListener("pointermove",E),_=!0),h.canvas=d,h.init(),h.render(),f.play(),d.addEventListener("click",()=>{z(f)}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(f.muted=!0,f.play())}))};function F(){window.removeEventListener("pointermove",E),window.removeEventListener("resize",v),_=!1}document.addEventListener("astro:page-load",w);document.addEventListener("astro:before-swap",F);const R=new q;R.onElementLoaded("blob-cursor-follower",i=>{i?.add(()=>{const t=document.getElementById("blob-cursor-follower");p.set(t,{opacity:1,scale:0,transformOrigin:"center center",xPercent:-50,yPercent:-50});const e=p.quickTo(t,"x",{ease:"power3"}),n=p.quickTo(t,"y",{ease:"power3"}),o=document.getElementById("blob");o.addEventListener("mousemove",a=>{const u=o.getBoundingClientRect();e(a.clientX-u.left),n(a.clientY-u.top-u.height)}),o.addEventListener("mouseenter",()=>{p.to(t,{duration:1,opacity:1,scale:1,transformOrigin:"center center"})}),o.addEventListener("mouseleave",()=>{p.to(t,{duration:.5,opacity:0,scale:0,transformOrigin:"center center"})})})});
